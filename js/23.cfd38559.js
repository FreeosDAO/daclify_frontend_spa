"use strict";(self["webpackChunkdaclifyfrontend"]=self["webpackChunkdaclifyfrontend"]||[]).push([[23],{12627:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var a=r(34182);const s={class:"row justify-between items-center"},o={key:0},n={key:1},i={key:0,class:"row justify-end q-mt-sm text-weight-light"};function c(e,t,r,c,l,m){const g=(0,a.resolveComponent)("page-header"),u=(0,a.resolveComponent)("q-btn"),d=(0,a.resolveComponent)("q-checkbox"),h=(0,a.resolveComponent)("q-card-section"),p=(0,a.resolveComponent)("q-card"),C=(0,a.resolveComponent)("latest-userterms"),b=(0,a.resolveComponent)("q-page");return(0,a.openBlock)(),(0,a.createBlock)(b,{padding:"",class:"constrain-page-width"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(g,{title:"Member Registration"}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,null,{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",s,[e.getIsMember?((0,a.openBlock)(),(0,a.createElementBlock)("div",n,"You are a member")):((0,a.openBlock)(),(0,a.createElementBlock)("div",o,"You are not a member of this group")),e.getIsMember?((0,a.openBlock)(),(0,a.createBlock)(u,{key:3,label:"unregister",color:"primary",onClick:e.unregmember,loading:e.is_transacting},null,8,["onClick","loading"])):((0,a.openBlock)(),(0,a.createBlock)(u,{key:2,label:"register",color:"primary",onClick:e.regmember,loading:e.is_transacting},null,8,["onClick","loading"]))]),e.getCoreConfig&&e.getCoreConfig.conf.userterms?((0,a.openBlock)(),(0,a.createElementBlock)("div",i,[(0,a.createVNode)(d,{modelValue:e.agree_terms,"onUpdate:modelValue":t[0]||(t[0]=t=>e.agree_terms=t),"left-label":"",label:"I have read and I agree to the user terms."},null,8,["modelValue"])])):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1}),(0,a.createVNode)(p,{class:"q-mt-md"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C)])),_:1})])),_:1})}var l=r(10741),m=r(33314),g=r(98625);const u=(0,a.defineComponent)({name:"vote",components:{pageHeader:m.Z,latestUserterms:g.Z},data(){return{agree_terms:!1,is_transacting:!1}},computed:{...(0,l.Se)({getAccountName:"ual/getAccountName",getActiveGroup:"group/getActiveGroup",getIsMember:"user/getIsMember",getCoreConfig:"group/getCoreConfig",getLatestUserterms:"group/getLatestUserterms"})},methods:{async regmember(){let e={account:this.getActiveGroup,name:"regmember",data:{actor:this.getAccountName}},t={account:this.getActiveGroup,name:"signuserterm",data:{member:this.getAccountName,agree_terms:this.agree_terms}},r=[e];this.getCoreConfig.conf.userterms&&r.push(t),this.is_transacting=!0;let a=await this.$store.dispatch("ual/transact",{actions:r,disable_signing_overlay:!0});if(a&&a.trxid){let e=this.getLatestUserterms&&this.getLatestUserterms.id&&this.agree_terms?this.getLatestUserterms.id:0;this.$store.commit("user/setIsMember",{account:this.getAccountName,member_since:a.block_time,agreed_userterms_version:e})}this.is_transacting=!1},async unregmember(){let e={account:this.getActiveGroup,name:"unregmember",data:{actor:this.getAccountName}};this.is_transacting=!0;let t=await this.$store.dispatch("ual/transact",{actions:[e],disable_signing_overlay:!0});t&&t.trxid&&this.$store.commit("user/setIsMember",!1),this.is_transacting=!1}}});var d=r(74260),h=r(24379),p=r(10151),C=r(25589),b=r(2165),k=r(65735),f=r(7518),_=r.n(f);const v=(0,d.Z)(u,[["render",c]]),y=v;_()(u,"components",{QPage:h.Z,QCard:p.Z,QCardSection:C.Z,QBtn:b.Z,QCheckbox:k.Z})}}]);