"use strict";(self["webpackChunkdaclifyfrontend"]=self["webpackChunkdaclifyfrontend"]||[]).push([[894],{38266:(e,t,o)=>{o.r(t),o.d(t,{default:()=>bo});var a=o(34182);const n={class:"row bg-secondary items-center justify-between",style:{height:"60px"}},l={class:"q-ml-md"},r={class:"q-mx-md"};function i(e,t,o,i,c,s){const d=(0,a.resolveComponent)("page-header"),m=(0,a.resolveComponent)("q-btn"),u=(0,a.resolveComponent)("config-editor"),p=(0,a.resolveComponent)("q-tab-panel"),h=(0,a.resolveComponent)("config-updater"),g=(0,a.resolveComponent)("q-tab-panels"),C=(0,a.resolveComponent)("q-card"),_=(0,a.resolveComponent)("manage-modules"),f=(0,a.resolveComponent)("q-page");return(0,a.openBlock)(),(0,a.createBlock)(f,{padding:"",class:"constrain-page-width"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,null,{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",n,[(0,a.createElementVNode)("div",l,[(0,a.createVNode)(d,{title:"Configuration",colorClass:"text-primary"})]),(0,a.createElementVNode)("div",r,["config_view"==e.view_panel?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,disabled:!e.getCoreConfigDeltas,label:`changes (${e.getCoreConfigDeltas?e.getCoreConfigDeltas.length:0})`,onClick:t[0]||(t[0]=t=>e.view_panel="update_view"),color:"primary"},null,8,["disabled","label"])):(0,a.createCommentVNode)("",!0),"update_view"==e.view_panel?((0,a.openBlock)(),(0,a.createBlock)(m,{key:1,flat:"",label:"go back",onClick:t[1]||(t[1]=t=>e.view_panel="config_view"),color:"primary"})):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(g,{"keep-alive":"",modelValue:e.view_panel,"onUpdate:modelValue":t[2]||(t[2]=t=>e.view_panel=t),animated:"",class:"fit","transition-prev":"scale","transition-next":"scale"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(p,{name:"config_view",class:"no-padding overflow-hidden"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u)])),_:1}),(0,a.createVNode)(p,{name:"update_view",class:"no-padding overflow-hidden"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h)])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.createVNode)(_,{class:"q-mt-md"})])),_:1})}var c=o(10741),s=o(33314);const d={class:"q-pa-md"},m={class:"row items-center"},u=(0,a.createElementVNode)("p",null,"This is the main account of the group.",-1),p=(0,a.createElementVNode)("p",null," This module is enabled by default and can't be turned off. It enables all core features of the group account. ",-1),h=(0,a.createElementVNode)("p",null,'You can enable additional functionallity in the "Modules" section.',-1),g=(0,a.createElementVNode)("p",null,"Configure the group by clicking the items.",-1),C=(0,a.createElementVNode)("p",null,' The maintainer account (can be an other group!) will be added to the groups "owner" permission. This means that this account will (also) have full control over the group. By leaving this field blank this feature is disabled and the guardians are the only controlling accounts. ',-1);function _(e,t,o,n,l,r){const i=(0,a.resolveComponent)("q-btn"),c=(0,a.resolveComponent)("q-icon"),s=(0,a.resolveComponent)("q-tree"),_=(0,a.resolveComponent)("page-header"),f=(0,a.resolveComponent)("q-tab-panel"),v=(0,a.resolveComponent)("set-members"),w=(0,a.resolveComponent)("set-guardians"),N=(0,a.resolveComponent)("set-maintainance-account"),V=(0,a.resolveComponent)("set-proposals"),b=(0,a.resolveComponent)("set-internal-accounting"),k=(0,a.resolveComponent)("code-deployer"),x=(0,a.resolveComponent)("update-color"),y=(0,a.resolveComponent)("action-proposer"),q=(0,a.resolveComponent)("q-tab-panels"),B=(0,a.resolveComponent)("q-splitter");return e.getNewCoreConfig?((0,a.openBlock)(),(0,a.createBlock)(B,{key:0,modelValue:e.splitterModel,"onUpdate:modelValue":t[3]||(t[3]=t=>e.splitterModel=t),"separator-class":"bg-secondary",horizontal:!1},{separator:(0,a.withCtx)((()=>[(0,a.createVNode)(i,{icon:"compare_arrows",round:"",color:"primary",dense:"",size:"11px"})])),before:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",d,[(0,a.createVNode)(s,{"control-color":"primary",nodes:e.getGroupTree(),"node-key":"label","selected-color":"primary",selected:e.selected,"onUpdate:selected":t[0]||(t[0]=t=>e.selected=t),expanded:e.expanded,"onUpdate:expanded":t[1]||(t[1]=t=>e.expanded=t),"default-expand-all":!1,accordion:!0},{"default-header":(0,a.withCtx)((e=>[(0,a.createElementVNode)("div",m,[e.node.icon?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,name:e.node.icon,color:"",size:"28px",class:"q-mr-sm"},null,8,["name"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",null,(0,a.toDisplayString)(e.node.label),1)])])),_:1},8,["nodes","selected","expanded"])])])),after:(0,a.withCtx)((()=>[(0,a.createVNode)(q,{modelValue:e.selected,"onUpdate:modelValue":t[2]||(t[2]=t=>e.selected=t),animated:"",class:"full-height","transition-prev":"jump-up","transition-next":"jump-up"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{name:e.getActiveGroup.toUpperCase(),class:"overflow-hidden"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_,{title:e.getActiveGroup},null,8,["title"]),u])),_:1},8,["name"]),(0,a.createVNode)(f,{name:"Core",class:"overflow-hidden"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_,{title:"Core Module"}),p,h,g])),_:1}),(0,a.createVNode)(f,{name:"Members",class:"overflow-hidden"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_,{title:"Members"}),(0,a.createVNode)(v)])),_:1}),(0,a.createVNode)(f,{name:"Guardians",class:"overflow-hidden"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_,{title:"Guardians"}),(0,a.createVNode)(w)])),_:1}),(0,a.createVNode)(f,{name:"Maintainer Account",class:"overflow-hidden"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_,{title:"Maintainer Account"}),C,(0,a.createVNode)(N)])),_:1}),(0,a.createVNode)(f,{name:"Proposals",class:"overflow-hidden"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_,{title:"Proposals"}),(0,a.createVNode)(V)])),_:1}),(0,a.createVNode)(f,{name:"Internal Accounting",class:"overflow-hidden"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_,{title:"Internal Accounting"}),(0,a.createVNode)(b)])),_:1}),(0,a.createVNode)(f,{name:"Update Code",class:"overflow-hidden"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_,{title:"Update Core Code"}),(0,a.createVNode)(k,{module:{module_name:"core",slave_permission:{actor:e.getActiveGroup,permission:"owner"},has_contract:!0}},null,8,["module"])])),_:1}),(0,a.createVNode)(f,{name:"Color",class:"overflow-hidden"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_,{title:"UI Color"}),(0,a.createVNode)(y,null,{default:(0,a.withCtx)((e=>[(0,a.createVNode)(x,{onPropose:e.propose,onAddtobucket:e.addtobucket},null,8,["onPropose","onAddtobucket"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])):(0,a.createCommentVNode)("",!0)}const f=(0,a.createElementVNode)("div",null,"SEC",-1);function v(e,t,o,n,l,r){const i=(0,a.resolveComponent)("q-icon"),c=(0,a.resolveComponent)("q-input");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createVNode)(c,{outlined:"",label:"Max number of guardians",type:"number",modelValue:e.getNewCoreConfig.conf.max_guardians,"onUpdate:modelValue":t[0]||(t[0]=t=>e.getNewCoreConfig.conf.max_guardians=t),onInput:t[1]||(t[1]=t=>e.$store.commit("group/setNewCoreConfigPath",{path:"conf.max_guardians",value:Number(t)}))},{prepend:(0,a.withCtx)((()=>[(0,a.createVNode)(i,{name:"mdi-account-key"})])),_:1},8,["modelValue"]),(0,a.createVNode)(c,{class:"q-mt-md",outlined:"",label:"Inactivate guardian after inactivity seconds",type:"number",modelValue:e.getNewCoreConfig.conf.inactivate_cust_after_sec,"onUpdate:modelValue":t[2]||(t[2]=t=>e.getNewCoreConfig.conf.inactivate_cust_after_sec=t),onInput:t[3]||(t[3]=t=>e.$store.commit("group/setNewCoreConfigPath",{path:"conf.inactivate_cust_after_sec",value:Number(t)}))},{prepend:(0,a.withCtx)((()=>[(0,a.createVNode)(i,{name:"mdi-heart"})])),append:(0,a.withCtx)((()=>[f])),_:1},8,["modelValue"])])}const w=(0,a.defineComponent)({data(){return{}},computed:{...(0,c.Se)({getNewCoreConfig:"group/getNewCoreConfig"})}});var N=o(74260),V=o(64689),b=o(24554),k=o(7518),x=o.n(k);const y=(0,N.Z)(w,[["render",v]]),q=y;x()(w,"components",{QInput:V.Z,QIcon:b.Z});const B=(0,a.createTextVNode)("Enable Internal Transfers"),A=(0,a.createTextVNode)("Enable Deposits"),E=(0,a.createTextVNode)("Enable Withdrawals");function Z(e,t,o,n,l,r){const i=(0,a.resolveComponent)("q-item-label"),c=(0,a.resolveComponent)("q-item-section"),s=(0,a.resolveComponent)("q-toggle"),d=(0,a.resolveComponent)("q-item"),m=(0,a.resolveComponent)("q-list");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createVNode)(m,{separator:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{clickable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(i,null,{default:(0,a.withCtx)((()=>[B])),_:1})])),_:1}),(0,a.createVNode)(c,{side:""},{default:(0,a.withCtx)((()=>[e.getNewCoreConfig?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,"true-value":1,"false-value":0,modelValue:e.getNewCoreConfig.conf.internal_transfers,"onUpdate:modelValue":t[0]||(t[0]=t=>e.getNewCoreConfig.conf.internal_transfers=t),color:"positive",onInput:t[1]||(t[1]=t=>e.$store.commit("group/setNewCoreConfigPath",{path:"conf.internal_transfers",value:Number(t)}))},null,8,["modelValue"])):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1}),(0,a.createVNode)(d,{clickable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(i,null,{default:(0,a.withCtx)((()=>[A])),_:1})])),_:1}),(0,a.createVNode)(c,{side:""},{default:(0,a.withCtx)((()=>[e.getNewCoreConfig?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,"true-value":1,"false-value":0,modelValue:e.getNewCoreConfig.conf.deposits,"onUpdate:modelValue":t[2]||(t[2]=t=>e.getNewCoreConfig.conf.deposits=t),color:"positive",onInput:t[3]||(t[3]=t=>e.$store.commit("group/setNewCoreConfigPath",{path:"conf.deposits",value:Number(t)}))},null,8,["modelValue"])):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1}),(0,a.createVNode)(d,{clickable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(i,null,{default:(0,a.withCtx)((()=>[E])),_:1})])),_:1}),(0,a.createVNode)(c,{side:""},{default:(0,a.withCtx)((()=>[e.getNewCoreConfig?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,"true-value":1,"false-value":0,modelValue:e.getNewCoreConfig.conf.withdrawals,"onUpdate:modelValue":t[4]||(t[4]=t=>e.getNewCoreConfig.conf.withdrawals=t),color:"positive",onInput:t[5]||(t[5]=t=>e.$store.commit("group/setNewCoreConfigPath",{path:"conf.withdrawals",value:Number(t)}))},null,8,["modelValue"])):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1})])),_:1})])}const Q=(0,a.defineComponent)({data(){return{}},computed:{...(0,c.Se)({getNewCoreConfig:"group/getNewCoreConfig"})}});var T=o(27011),$=o(83414),U=o(52035),S=o(2350),I=o(28886);const P=(0,N.Z)(Q,[["render",Z]]),M=P;x()(Q,"components",{QInput:V.Z,QIcon:b.Z,QList:T.Z,QItem:$.Z,QItemSection:U.Z,QItemLabel:S.Z,QToggle:I.Z});const G=(0,a.createTextVNode)('Auto execute "immediate" threshold');function D(e,t,o,n,l,r){const i=(0,a.resolveComponent)("q-icon"),c=(0,a.resolveComponent)("q-input"),s=(0,a.resolveComponent)("q-item-label"),d=(0,a.resolveComponent)("q-item-section"),m=(0,a.resolveComponent)("q-toggle"),u=(0,a.resolveComponent)("q-item"),p=(0,a.resolveComponent)("q-list");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createVNode)(c,{outlined:"",label:"Proposal History Size",type:"number",modelValue:e.getNewCoreConfig.conf.proposal_archive_size,"onUpdate:modelValue":t[0]||(t[0]=t=>e.getNewCoreConfig.conf.proposal_archive_size=t),onInput:t[1]||(t[1]=t=>e.$store.commit("group/setNewCoreConfigPath",{path:"conf.proposal_archive_size",value:Number(t)}))},{prepend:(0,a.withCtx)((()=>[(0,a.createVNode)(i,{name:"mdi-history"})])),_:1},8,["modelValue"]),(0,a.createVNode)(p,{separator:"",class:"q-mt-md"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{clickable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)((()=>[G])),_:1})])),_:1}),(0,a.createVNode)(d,{side:""},{default:(0,a.withCtx)((()=>[e.getNewCoreConfig?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,"true-value":1,"false-value":0,modelValue:e.getNewCoreConfig.conf.exec_on_threshold_zero,"onUpdate:modelValue":t[2]||(t[2]=t=>e.getNewCoreConfig.conf.exec_on_threshold_zero=t),color:"positive",onInput:t[3]||(t[3]=t=>e.$store.commit("group/setNewCoreConfigPath",{path:"conf.exec_on_threshold_zero",value:Number(t)}))},null,8,["modelValue"])):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1})])),_:1})])}const L=(0,a.defineComponent)({data(){return{}},computed:{...(0,c.Se)({getNewCoreConfig:"group/getNewCoreConfig"})}}),z=(0,N.Z)(L,[["render",D]]),R=z;x()(L,"components",{QInput:V.Z,QIcon:b.Z,QList:T.Z,QItem:$.Z,QItemSection:U.Z,QItemLabel:S.Z,QToggle:I.Z});const F={class:"row items-center justify-between no-wrap"},j=(0,a.createTextVNode)(" @ ");function O(e,t,o,n,l,r){const i=(0,a.resolveComponent)("q-input");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createElementVNode)("div",F,[(0,a.createVNode)(i,{style:{"min-width":"200px"},class:"q-mr-xs",modelValue:e.getNewCoreConfig.conf.maintainer_account.actor,"onUpdate:modelValue":t[0]||(t[0]=t=>e.getNewCoreConfig.conf.maintainer_account.actor=t),onInput:t[1]||(t[1]=t=>e.$store.commit("group/setNewCoreConfigPath",{path:"conf.maintainer_account.actor",value:t})),label:"Actor",outlined:"",maxlength:"12",debounce:500,"bottom-slots":"",placeholder:"name of the account","no-error-icon":""},null,8,["modelValue"]),(0,a.createVNode)(i,{style:{width:"100%"},ref:"permission",modelValue:e.getNewCoreConfig.conf.maintainer_account.permission,"onUpdate:modelValue":t[2]||(t[2]=t=>e.getNewCoreConfig.conf.maintainer_account.permission=t),onInput:t[3]||(t[3]=t=>e.$store.commit("group/setNewCoreConfigPath",{path:"conf.maintainer_account.permission",value:t})),label:"Permission",outlined:"","bottom-slots":"",placeholder:"permission to use","no-error-icon":""},{prepend:(0,a.withCtx)((()=>[j])),_:1},8,["modelValue"])])])}const J=(0,a.defineComponent)({data(){return{}},computed:{...(0,c.Se)({getNewCoreConfig:"group/getNewCoreConfig"})}}),H=(0,N.Z)(J,[["render",O]]),W=H;x()(J,"components",{QInput:V.Z});const K=(0,a.createTextVNode)("Enable member registration"),Y=(0,a.createTextVNode)("Enable userterms/constitution");function X(e,t,o,n,l,r){const i=(0,a.resolveComponent)("q-item-label"),c=(0,a.resolveComponent)("q-item-section"),s=(0,a.resolveComponent)("q-toggle"),d=(0,a.resolveComponent)("q-item"),m=(0,a.resolveComponent)("q-list");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createVNode)(m,{separator:"",class:"q-mt-md"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{clickable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(i,null,{default:(0,a.withCtx)((()=>[K])),_:1})])),_:1}),(0,a.createVNode)(c,{side:""},{default:(0,a.withCtx)((()=>[e.getNewCoreConfig?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,"true-value":1,"false-value":0,modelValue:e.getNewCoreConfig.conf.member_registration,"onUpdate:modelValue":t[0]||(t[0]=t=>e.getNewCoreConfig.conf.member_registration=t),color:"positive",onInput:t[1]||(t[1]=t=>e.$store.commit("group/setNewCoreConfigPath",{path:"conf.member_registration",value:Number(t)}))},null,8,["modelValue"])):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1}),(0,a.createVNode)(d,{clickable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(i,null,{default:(0,a.withCtx)((()=>[Y])),_:1})])),_:1}),(0,a.createVNode)(c,{side:""},{default:(0,a.withCtx)((()=>[e.getNewCoreConfig?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,"true-value":1,"false-value":0,modelValue:e.getNewCoreConfig.conf.userterms,"onUpdate:modelValue":t[2]||(t[2]=t=>e.getNewCoreConfig.conf.userterms=t),color:"positive",onInput:t[3]||(t[3]=t=>e.$store.commit("group/setNewCoreConfigPath",{path:"conf.userterms",value:Number(t)}))},null,8,["modelValue"])):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1})])),_:1})])}const ee=(0,a.defineComponent)({data(){return{}},computed:{...(0,c.Se)({getNewCoreConfig:"group/getNewCoreConfig"})}}),te=(0,N.Z)(ee,[["render",X]]),oe=te;x()(ee,"components",{QList:T.Z,QItem:$.Z,QItemSection:U.Z,QItemLabel:S.Z,QToggle:I.Z});var ae=o(98062);const ne={class:"row"},le=["onClick"],re={class:"text-grey-7"},ie={class:"q-mt-md row justify-end"},ce={class:"q-mb-xs"};function se(e,t,o,n,l,r){const i=(0,a.resolveComponent)("q-icon"),c=(0,a.resolveComponent)("q-btn"),s=(0,a.resolveComponent)("propose-bucket-btn");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createElementVNode)("div",ne,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.palette,(t=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{style:(0,a.normalizeStyle)(`background-color: ${t}; width: ${e.palette_size}; height:${e.palette_size}`),key:`${t}`,onClick:o=>e.setNewColor(t),class:"row items-center justify-center cursor-pointer"},[(0,a.createVNode)(a.Transition,{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut",mode:"out-in"},{default:(0,a.withCtx)((()=>[e.new_hexcolor==t?((0,a.openBlock)(),(0,a.createBlock)(i,{key:0,name:"check",color:"white"})):(0,a.createCommentVNode)("",!0)])),_:2},1024)],12,le)))),128))]),(0,a.createElementVNode)("div",re,(0,a.toDisplayString)(e.new_hexcolor),1),(0,a.createElementVNode)("div",ie,[e.isColorChanged?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,icon:"remove_red_eye",round:"",size:"sm",flat:"",color:"primary",onClick:t[0]||(t[0]=t=>e.setNewColor(e.getActiveGroupConfig.ui.hexcolor))})):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",ce,[(0,a.createVNode)(s,{onClickPropose:e.emitPropose,onClickBucket:e.emitBucket,label:"Update Color",disabled:!e.isColorChanged},null,8,["onClickPropose","onClickBucket","disabled"])])])])}var de=o(94398),me=o(92287);const ue=(0,a.defineComponent)({name:"updatecolor",components:{proposeBucketBtn:me.Z},data(){return{palette:["#019A9D","#D9B801","#E8045A","#B2028A","#7DC6EC","#7CB342","#F4511E","#FF9A17","#798CEF","#9E8D67","#3399FF"],palette_size:"35px",new_hexcolor:""}},computed:{...(0,c.Se)({getActiveGroup:"group/getActiveGroup",getActiveGroupConfig:"group/getActiveGroupConfig",getAppConfig:"app/getAppConfig"}),isColorChanged(){return!(!this.getActiveGroupConfig||this.new_hexcolor==this.getActiveGroupConfig.ui.hexcolor)}},methods:{setNewColor(e){this.new_hexcolor=e,(0,de.Z)("primary",e)},emitPropose(){let e={account:this.getAppConfig.groups_contract,name:"updatecolor",data:{groupname:this.getActiveGroup,hexcolor:this.new_hexcolor}};const t={actions:[e],description:`Proposal to update the UI color "${this.getActiveGroup}"`,title:"Update Color"};this.$emit("propose",t)},emitBucket(){let e={account:this.getAppConfig.groups_contract,name:"updatecolor",data:{groupname:this.getActiveGroup,hexcolor:this.new_hexcolor}};this.$emit("addtobucket",e)}},watch:{getActiveGroupConfig:{immediate:!0,handler(e,t){e&&(this.new_hexcolor=this.getActiveGroupConfig.ui.hexcolor.toUpperCase())}}}});var pe=o(2165);const he=(0,N.Z)(ue,[["render",se]]),ge=he;x()(ue,"components",{QIcon:b.Z,QBtn:pe.Z});const Ce={key:0},_e={key:"info"},fe={class:"row"},ve=(0,a.createTextVNode)(" account: "),we={key:0},Ne={key:"updatecode"},Ve={class:"q-mt-md"},be={key:0},ke={key:1,class:"row justify-between"};function xe(e,t,o,n,l,r){const i=(0,a.resolveComponent)("explorer-link"),c=(0,a.resolveComponent)("code-selector"),s=(0,a.resolveComponent)("q-btn");return e.module?((0,a.openBlock)(),(0,a.createElementBlock)("div",Ce,[(0,a.createVNode)(a.Transition,{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut",mode:"out-in"},{default:(0,a.withCtx)((()=>["info"==e.view?((0,a.openBlock)(),(0,a.createElementBlock)("div",_e,[(0,a.createElementVNode)("div",null,"module name: "+(0,a.toDisplayString)(e.module.module_name),1),(0,a.createElementVNode)("div",fe,[ve,(0,a.createVNode)(i,{accountname:e.module.slave_permission.actor},null,8,["accountname"])]),e.current_code_and_abi_hash?((0,a.openBlock)(),(0,a.createElementBlock)("div",we,[(0,a.createElementVNode)("div",null,"abi hash: "+(0,a.toDisplayString)(e.current_code_and_abi_hash.abi_hash),1),(0,a.createElementVNode)("div",null,"code hash: "+(0,a.toDisplayString)(e.current_code_and_abi_hash.code_hash),1)])):(0,a.createCommentVNode)("",!0)])):"update_code"==e.view?((0,a.openBlock)(),(0,a.createElementBlock)("div",Ne,[(0,a.createVNode)(c,{modelValue:e.new_hex,"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_hex=t)},null,8,["modelValue"])])):(0,a.createCommentVNode)("",!0)])),_:1}),(0,a.createElementVNode)("div",Ve,["info"==e.view?((0,a.openBlock)(),(0,a.createElementBlock)("div",be,[e.module.has_contract?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,label:"update code",onClick:t[1]||(t[1]=t=>e.view="update_code"),color:"primary"})):(0,a.createCommentVNode)("",!0)])):((0,a.openBlock)(),(0,a.createElementBlock)("div",ke,[(0,a.createVNode)(s,{label:"back",onClick:e.reset_view,color:"primary",flat:""},null,8,["onClick"]),(0,a.createVNode)(s,{label:"propose code update",onClick:e.proposeCodeUpdate,color:"primary",disabled:!e.can_propose_code_update,loading:e.is_proposing},null,8,["onClick","disabled","loading"])]))])])):(0,a.createCommentVNode)("",!0)}const ye={class:"column q-gutter-md"},qe={key:"remote",class:"row items-center"},Be={class:"q-mr-md"},Ae={key:"local",class:"row items-center"},Ee={style:{width:"230px"},class:"q-mr-md"},Ze={style:{width:"230px"},class:"q-mr-md"},Qe={class:"q-mr-md"},Te={key:"daclify",class:"row items-center no-wrap"},$e={class:"q-mr-md"};function Ue(e,t,o,n,l,r){const i=(0,a.resolveComponent)("q-item-label"),c=(0,a.resolveComponent)("q-item-section"),s=(0,a.resolveComponent)("q-item"),d=(0,a.resolveComponent)("q-icon"),m=(0,a.resolveComponent)("q-select"),u=(0,a.resolveComponent)("q-input"),p=(0,a.resolveComponent)("q-btn"),h=(0,a.resolveComponent)("q-file");return(0,a.openBlock)(),(0,a.createElementBlock)("div",ye,[(0,a.createVNode)(m,{outlined:"",modelValue:e.selected_src,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selected_src=t),options:e.src_options,label:"Select source",onInput:e.emit_empty},{option:(0,a.withCtx)((e=>[(0,a.createVNode)(s,(0,a.normalizeProps)((0,a.guardReactiveProps)(e.itemProps)),{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(i,{innerHTML:e.opt.label},null,8,["innerHTML"]),(0,a.createVNode)(i,{caption:"",innerHTML:e.opt.sublabel},null,8,["innerHTML"])])),_:2},1024)])),_:2},1040)])),prepend:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{name:"mdi-source-repository"})])),_:1},8,["modelValue","options","onInput"]),(0,a.createVNode)(a.Transition,{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut",mode:"out-in"},{default:(0,a.withCtx)((()=>["remote"==e.selected_src.value?((0,a.openBlock)(),(0,a.createElementBlock)("div",qe,[(0,a.createVNode)(u,{label:"wasm url",outlined:"",modelValue:e.wasm_url,"onUpdate:modelValue":t[1]||(t[1]=t=>e.wasm_url=t),class:"q-mr-md"},{prepend:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{name:"mdi-file-link"})])),_:1},8,["modelValue"]),(0,a.createVNode)(u,{label:"abi url",outlined:"",modelValue:e.abi_url,"onUpdate:modelValue":t[2]||(t[2]=t=>e.abi_url=t),class:"q-mr-md"},{prepend:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{name:"mdi-file-link"})])),_:1},8,["modelValue"]),(0,a.createElementVNode)("div",Be,[(0,a.createVNode)(p,{label:"load",color:"primary",onClick:e.load_remote},null,8,["onClick"])])])):"local"==e.selected_src.value?((0,a.openBlock)(),(0,a.createElementBlock)("div",Ae,[(0,a.createElementVNode)("div",Ee,[(0,a.createVNode)(h,{outlined:"",clearable:"",counter:"",modelValue:e.wasm_file,"onUpdate:modelValue":t[3]||(t[3]=t=>e.wasm_file=t),label:"wasm file",accept:".wasm"},{prepend:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{name:"mdi-file-code"})])),_:1},8,["modelValue"])]),(0,a.createElementVNode)("div",Ze,[(0,a.createVNode)(h,{outlined:"",clearable:"",counter:"",modelValue:e.abi_file,"onUpdate:modelValue":t[4]||(t[4]=t=>e.abi_file=t),label:"abi file",accept:".abi"},{prepend:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{name:"mdi-file-code"})])),_:1},8,["modelValue"])]),(0,a.createElementVNode)("div",Qe,[(0,a.createVNode)(p,{label:"load",color:"primary",onClick:e.compile_local},null,8,["onClick"])])])):"daclify"==e.selected_src.value?((0,a.openBlock)(),(0,a.createElementBlock)("div",Te,[(0,a.createVNode)(m,{class:"q-mr-md",style:{width:"100%"},outlined:"",modelValue:e.daclify_registry_selection,"onUpdate:modelValue":t[5]||(t[5]=t=>e.daclify_registry_selection=t),options:e.daclify_registry_options,label:"Select version"},{option:(0,a.withCtx)((e=>[(0,a.createVNode)(s,(0,a.normalizeProps)((0,a.guardReactiveProps)(e.itemProps)),{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(i,{innerHTML:e.opt.label},null,8,["innerHTML"]),(0,a.createVNode)(i,{caption:"",innerHTML:e.opt.sublabel},null,8,["innerHTML"])])),_:2},1024)])),_:2},1040)])),prepend:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{name:"mdi-expand-all"})])),_:1},8,["modelValue","options"]),(0,a.createElementVNode)("div",$e,[(0,a.createVNode)(p,{label:"load",color:"primary",onClick:t[6]||(t[6]=()=>{})})])])):(0,a.createCommentVNode)("",!0)])),_:1})])}o(76105),o(15123),o(98685),o(12396);var Se=o(16336),Ie=o(40019),Pe=o(14244)["Buffer"];const Me=(0,a.defineComponent)({name:"codeSelector",data(){return{selected_src:"",src_options:[{label:"Daclify",sublabel:"official releases from Daclify registry",value:"daclify"},{label:"Remote",sublabel:"github, server, ... ",value:"remote"},{label:"Local",sublabel:"disk",value:"local"}],wasm_url:"",abi_url:"",wasm_file:[],abi_file:[],daclify_registry_selection:"",daclify_registry_options:[{label:"Todo",sublabel:"fetch code versions from register",value:"todo"}]}},methods:{emit_empty(){this.$emit("input",{code_hash:"",abi_hash:"",wasm:"",abi:""})},async load_remote(){let e=await this.loadRemoteWasm(this.wasm_url),t=await this.loadRemoteAbi(this.abi_url),o=Object.assign(e,t);this.$emit("input",o)},async compile_local(){Ie.log(this.wasm_file);let e=await this._readLocalFile(this.wasm_file,!0),t=await this._readLocalFile(this.abi_file,!1);t=await this.parseAbi(t);let o={wasm:this.buf2hex(e),code_hash:(0,Se.JQ)(new Uint8Array(e,0)),abi:t,abi_hash:(0,Se.JQ)(new Uint8Array(t,0))};this.$emit("input",o)},async loadRemoteWasm(e){e=e+"?t="+(new Date).getTime();let t=await this.$axios.get(e,{responseType:"arraybuffer"}),o=(0,Se.JQ)(new Uint8Array(t.data,0));return Ie.log("calculated code_hash",o),t={wasm:this.buf2hex(t.data),code_hash:o},t},async loadRemoteAbi(e){e=e+"?t="+(new Date).getTime();let t=await this.$axios.get(e,{responseType:"text",transformResponse:[e=>e]}),o=(0,Se.JQ)(new Uint8Array(t.data,0));return Ie.log("calculated abi_hash",o),t={abi:await this.parseAbi(t.data),abi_hash:o},t},async _readLocalFile(e,t=!1){return new Promise(((o,a)=>{var n=new FileReader;n.onload=function(e){return o(e.target.result)},t?n.readAsArrayBuffer(e):n.readAsText(e,"utf8")}))},async parseAbi(e){const t=this.$eos.Serialize,o=new t.SerialBuffer({textEncoder:new TextEncoder,textDecoder:new TextDecoder});let a=JSON.parse(e);const n=await this.$eos.api.abiTypes.get("abi_def");return a=n.fields.reduce(((e,{name:t})=>Object.assign(e,{[t]:e[t]||[]})),a),n.serialize(o,a),Pe.from(o.asUint8Array()).toString("hex")},buf2hex(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}}});var Ge=o(63314),De=o(81052);const Le=(0,N.Z)(Me,[["render",Ue]]),ze=Le;x()(Me,"components",{QSelect:Ge.Z,QItem:$.Z,QItemSection:U.Z,QItemLabel:S.Z,QIcon:b.Z,QInput:V.Z,QBtn:pe.Z,QFile:De.Z});var Re=o(23866),Fe=o(40019);const je=(0,a.defineComponent)({name:"codeDeployer",props:{module:""},components:{codeSelector:ze,explorerLink:Re.Z},data(){return{view:"info",current_code_and_abi_hash:"",new_hex:{wasm:"",abi:"",abi_hash:"",wasm_hash:""},is_proposing:!1}},computed:{...(0,c.Se)({getRpcEndpoints:"ual/getRpcEndpoints",getAccountName:"ual/getAccountName",getActiveGroup:"group/getActiveGroup"}),can_propose_code_update(){if(this.new_hex.wasm&&this.new_hex.abi)return!0}},methods:{reset_view(){this.view="info",this.new_hex={wasm:"",abi:"",abi_hash:"",code_hash:""}},async proposeCodeUpdate(){this.is_proposing=!0;let e=(0,Se.BU)();Fe.log(e);let t={account:"eosio",name:"setcode",data:{account:this.module.slave_permission.actor,vmtype:0,vmversion:0,code:this.new_hex.wasm},authorization:[this.module.slave_permission]},o={account:"eosio",name:"setabi",data:{account:this.module.slave_permission.actor,abi:this.new_hex.abi},authorization:[this.module.slave_permission]},a={return_action:!0,actions:[t,o],requested:[{actor:this.getActiveGroup,permission:"owner"}],proposal_name:e,vm:this},n=await this.$store.dispatch("ual/proposeSystemMsig",a),l=await this.$eos.api.serializeTransaction(n.data.trx);l=(0,Se.JQ)(l),Fe.log("proposal hash",l);let r=[{account:"eosio.msig",name:"approve",data:{proposer:this.getAccountName,proposal_name:e,level:{actor:this.getActiveGroup,permission:"owner"},proposal_hash:l},authorization:[{actor:this.getActiveGroup,permission:"owner"}]},{account:"eosio.msig",name:"exec",data:{proposer:this.getAccountName,proposal_name:e,executer:this.getActiveGroup},authorization:[{actor:this.getActiveGroup,permission:"owner"}]}],i={return_action:!0,title:`Code update module "${this.module.module_name}"`,description:`updating the the code of ${this.module.module_name}. New code hash: ${this.new_hex.code_hash}.`,actions:r},c=await this.$store.dispatch("group/propose",{data:i,vm:this}),s=await this.$store.dispatch("ual/transact",{actions:[n,c],disable_signing_overlay:!0});s&&s.trxid&&setTimeout((()=>{this.$store.dispatch("group/fetchProposals",{groupname:this.getActiveGroup,scope:this.getActiveGroup})}),1500),this.is_proposing=!1,this.reset_view()}},watch:{module:{immediate:!0,handler:async function(e,t){e&&e!=t&&e.slave_permission&&""===this.current_code_and_abi_hash&&(this.current_code_and_abi_hash=await(0,Se.dr)(this.getRpcEndpoints,this.module.slave_permission.actor,this))}}}}),Oe=(0,N.Z)(je,[["render",xe]]),Je=Oe;x()(je,"components",{QBtn:pe.Z});var He=[{label:"testtttt",icon:"mdi-account-group",children:[{label:"Core",icon:"mdi-settings",children:[{label:"Guardians",test:"bbbbb"},{label:"Proposals"},{label:"Members"},{label:"Internal Accounting"},{label:"Maintainer Account"}]},{label:"Meta & UI",icon:"mdi-television-guide",children:[{label:"Color"},{label:"Logo"},{label:"About"}]},{label:"Update Code",icon:"mdi-file-upload"}]}];const We=(0,a.defineComponent)({name:"groupSubaccounts",components:{setGuardians:q,setInternalAccounting:M,setProposals:R,setMembers:oe,pageHeader:s.Z,updateColor:ge,actionProposer:ae.Z,codeDeployer:Je,setMaintainanceAccount:W},data(){return{splitterModel:40,selected:"Modules",expanded:[],expand_all:!1}},computed:{...(0,c.Se)({getActiveGroup:"group/getActiveGroup",getNewCoreConfig:"group/getNewCoreConfig"})},methods:{getGroupTree(){return He[0].label=this.getActiveGroup.toUpperCase(),He}},mounted(){this.expanded.push(this.$route.params.groupname.toUpperCase())}});var Ke=o(80218),Ye=o(55078),Xe=o(5906),et=o(86602);const tt=(0,N.Z)(We,[["render",_]]),ot=tt;x()(We,"components",{QSplitter:Ke.Z,QBtn:pe.Z,QTree:Ye.Z,QIcon:b.Z,QTabPanels:Xe.Z,QTabPanel:et.Z});const at={class:""},nt=(0,a.createElementVNode)("thead",null,[(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("th",{class:"text-left"},"key"),(0,a.createElementVNode)("th",{class:"text-left"},"old value"),(0,a.createElementVNode)("th",{class:"text-left"},"new value"),(0,a.createElementVNode)("th",{class:"text-left"})])],-1),lt={class:"text-right"},rt=(0,a.createTextVNode)(" undo change "),it={class:"row justify-end q-pa-md"};function ct(e,t,o,n,l,r){const i=(0,a.resolveComponent)("q-tooltip"),c=(0,a.resolveComponent)("q-btn"),s=(0,a.resolveComponent)("q-markup-table"),d=(0,a.resolveComponent)("propose-bucket-btn"),m=(0,a.resolveComponent)("action-proposer");return(0,a.openBlock)(),(0,a.createBlock)(m,null,{default:(0,a.withCtx)((t=>[(0,a.createElementVNode)("div",at,[(0,a.createVNode)(s,{flat:""},{default:(0,a.withCtx)((()=>[nt,(0,a.createElementVNode)("tbody",null,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.getCoreConfigDeltas,(t=>((0,a.openBlock)(),(0,a.createElementBlock)("tr",{key:`${t.path.join("")}`},[(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(t.path.join(".")),1),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(t.lhs),1),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(t.rhs),1),(0,a.createElementVNode)("td",lt,[(0,a.createVNode)(c,{icon:"mdi-undo",size:"sm",round:"",unelevated:"",onClick:o=>e.$store.commit("group/setNewCoreConfigPath",{value:t.lhs,path:t.path.join(".")})},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(i,{delay:450,class:"bg-secondary"},{default:(0,a.withCtx)((()=>[rt])),_:1})])),_:2},1032,["onClick"])])])))),128))])])),_:1}),(0,a.createElementVNode)("div",it,[(0,a.createVNode)(d,{onClickPropose:o=>t.propose(e.getProposeAction),onClickBucket:o=>t.addtobucket({action:e.getBucketAction,vm:this}),label:"Update config",disabled:!e.getCoreConfigDeltas},null,8,["onClickPropose","onClickBucket","disabled"])])])])),_:1})}var st=o(40019);const dt=(0,a.defineComponent)({components:{actionProposer:ae.Z,proposeBucketBtn:me.Z},data(){return{}},computed:{...(0,c.Se)({getCoreConfigDeltas:"group/getCoreConfigDeltas",getNewCoreConfig:"group/getNewCoreConfig"}),getProposeAction(){let e=this.getAction();const t={actions:[e],description:`Changed values: \n${this.getCoreConfigDeltas.map((e=>e.path.join(".")+": "+e.rhs)).join("\n")}`,title:"Update group configuration"};return st.log(t),t},getBucketAction(){return this.getAction()}},methods:{getAction(){let e=JSON.parse(JSON.stringify(this.getNewCoreConfig.conf));e.exec_on_threshold_zero=!!e.exec_on_threshold_zero,e.member_registration=!!e.member_registration,e.withdrawals=!!e.withdrawals,e.internal_transfers=!!e.internal_transfers,e.deposits=!!e.deposits,e.userterms=!!e.userterms,e.r1=!!e.r1,e.r2=!!e.r2;let t={account:this.$store.state.group.activeGroup,name:"updateconf",data:{new_conf:e,remove:!1}};return t}}});var mt=o(30481),ut=o(5363);const pt=(0,N.Z)(dt,[["render",ct]]),ht=pt;x()(dt,"components",{QMarkupTable:mt.Z,QBtn:pe.Z,QTooltip:ut.Z,QList:T.Z,QItem:$.Z,QItemSection:U.Z,QItemLabel:S.Z});const gt={key:0},Ct={key:1},_t={key:0},ft={key:1},vt={key:"modules"};function wt(e,t,o,n,l,r){const i=(0,a.resolveComponent)("q-toolbar-title"),c=(0,a.resolveComponent)("q-space"),s=(0,a.resolveComponent)("q-tooltip"),d=(0,a.resolveComponent)("q-btn"),m=(0,a.resolveComponent)("q-toolbar"),u=(0,a.resolveComponent)("q-badge"),p=(0,a.resolveComponent)("q-item-section"),h=(0,a.resolveComponent)("q-item-label"),g=(0,a.resolveComponent)("q-separator"),C=(0,a.resolveComponent)("code-deployer"),_=(0,a.resolveComponent)("q-card-section"),f=(0,a.resolveComponent)("q-expansion-item"),v=(0,a.resolveComponent)("no-items"),w=(0,a.resolveComponent)("q-list"),N=(0,a.resolveComponent)("q-tab"),V=(0,a.resolveComponent)("q-tabs"),b=(0,a.resolveComponent)("link-module"),k=(0,a.resolveComponent)("action-proposer"),x=(0,a.resolveComponent)("q-tab-panel"),y=(0,a.resolveComponent)("new-account"),q=(0,a.resolveComponent)("q-tab-panels"),B=(0,a.resolveComponent)("q-card");return(0,a.openBlock)(),(0,a.createBlock)(B,{class:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(m,{class:"bg-secondary text-white shadow-2"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(i,{shrink:!0},{default:(0,a.withCtx)((()=>[e.manage_module?((0,a.openBlock)(),(0,a.createElementBlock)("span",gt,"Manage Modules")):((0,a.openBlock)(),(0,a.createElementBlock)("span",Ct,"Modules"))])),_:1}),(0,a.createVNode)(c),(0,a.createVNode)(d,{round:"",dense:"",icon:e.manage_module?"mdi-minus":"mdi-plus",color:"primary",onClick:t[0]||(t[0]=t=>e.manage_module=!e.manage_module)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,{class:"bg-secondary",delay:500},{default:(0,a.withCtx)((()=>[e.manage_module?((0,a.openBlock)(),(0,a.createElementBlock)("span",ft,"Go back to modules")):((0,a.openBlock)(),(0,a.createElementBlock)("span",_t,"manage modules"))])),_:1})])),_:1},8,["icon"])])),_:1}),(0,a.createVNode)(a.Transition,{"enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut",mode:"out-in",tag:"div"},{default:(0,a.withCtx)((()=>[e.manage_module?((0,a.openBlock)(),(0,a.createBlock)(_,{class:"relative-position",key:"add"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,{modelValue:e.manage_module_view,"onUpdate:modelValue":t[1]||(t[1]=t=>e.manage_module_view=t),dense:"",class:"text-primary",align:"left","inline-label":""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,{label:"link module",name:"link"}),(0,a.createVNode)(N,{label:"new account",name:"create"})])),_:1},8,["modelValue"]),(0,a.createVNode)(g),(0,a.createVNode)(q,{modelValue:e.manage_module_view,"onUpdate:modelValue":t[2]||(t[2]=t=>e.manage_module_view=t),style:{"min-height":"200px"},animated:"","transition-prev":"fade","transition-next":"fade",class:"overflow-hidden"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(x,{name:"link",class:"no-padding overflow-hidden",style:{"min-height":"200px"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(k,null,{default:(0,a.withCtx)((t=>[(0,a.createVNode)(b,{onPropose:t.propose,onAddtobucket:t.addtobucket,slave_permission:e.slave_permission},null,8,["onPropose","onAddtobucket","slave_permission"])])),_:1})])),_:1}),(0,a.createVNode)(x,{name:"create",class:"no-padding overflow-hidden",style:{"min-height":"200px"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(y,{onRequestLink:e.handleLinkRequest},null,8,["onRequestLink"])])),_:1})])),_:1},8,["modelValue"])])),_:1})):((0,a.openBlock)(),(0,a.createElementBlock)("div",vt,[(0,a.createVNode)(w,{class:"primary-hover-list",separator:"",striped:""},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.getModulesWithFilter,(e=>((0,a.openBlock)(),(0,a.createBlock)(f,{key:e.module_name,clickable:"",group:"modules"},{header:(0,a.withCtx)((()=>[(0,a.createVNode)(p,{side:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.module_name),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(p,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,{caption:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" slave permission "+(0,a.toDisplayString)(e.slave_permission),1)])),_:2},1024)])),_:2},1024)])),default:(0,a.withCtx)((()=>[(0,a.createVNode)(g),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(_,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,{module:e},null,8,["module"])])),_:2},1024)])])),_:2},1024)))),128)),e.getModulesWithFilter.length?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(v,{key:0,text:"No modules"}))])),_:1})]))])),_:1})])),_:1})}const Nt={class:"row q-col-gutter-md q-pb-xs q-mt-sm"},Vt={class:"col-xs-12 col-sm-6"},bt={class:"col-xs-12 col-sm-6"},kt={class:"row items-center justify-between no-wrap"},xt=(0,a.createTextVNode)(" @ "),yt={class:"col-xs-12 col-sm-6"},qt=(0,a.createTextVNode)(" Uncheck if the account doesn't have a contract installed. "),Bt={class:"row justify-between full-width items-center"};function At(e,t,o,n,l,r){const i=(0,a.resolveComponent)("q-input"),c=(0,a.resolveComponent)("q-tooltip"),s=(0,a.resolveComponent)("q-toggle"),d=(0,a.resolveComponent)("threshold-badge"),m=(0,a.resolveComponent)("propose-bucket-btn");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Nt,[(0,a.createElementVNode)("div",Vt,[(0,a.createVNode)(i,{ref:"modulename",modelValue:e.action.data.module_name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.action.data.module_name=t),label:"Module name",placeholder:"name for the module",outlined:"","bottom-slots":"",maxlength:"12",rules:[e=>!!e||"* Required",e.isValidAccountName,e.validateDuplicateModule]},null,8,["modelValue","rules"])]),(0,a.createElementVNode)("div",bt,[(0,a.createElementVNode)("div",kt,[(0,a.createVNode)(i,{style:{"min-width":"200px"},class:"q-mr-xs",ref:"actor",modelValue:e.action.data.slave_permission.actor,"onUpdate:modelValue":t[1]||(t[1]=t=>e.action.data.slave_permission.actor=t),label:"Actor",outlined:"",maxlength:"12",debounce:500,"bottom-slots":"",placeholder:"name of the account","no-error-icon":"",rules:[e=>!!e||"* Required",e.isValidAccountName,e.isExistingAccountNameWrapper]},null,8,["modelValue","rules"]),(0,a.createVNode)(i,{style:{width:"100%"},ref:"permission",modelValue:e.action.data.slave_permission.permission,"onUpdate:modelValue":t[2]||(t[2]=t=>e.action.data.slave_permission.permission=t),label:"Permission",outlined:"","bottom-slots":"",placeholder:"permission to use","no-error-icon":"",rules:[e=>!!e||"* Required",e.isValidAccountName]},{prepend:(0,a.withCtx)((()=>[xt])),_:1},8,["modelValue","rules"])])]),(0,a.createElementVNode)("div",yt,[(0,a.createVNode)(s,{modelValue:e.action.data.has_contract,"onUpdate:modelValue":t[3]||(t[3]=t=>e.action.data.has_contract=t),label:"has contract"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{class:"bg-primary",delay:500},{default:(0,a.withCtx)((()=>[qt])),_:1})])),_:1},8,["modelValue"])]),(0,a.createElementVNode)("div",Bt,[(0,a.createVNode)(d,{label:"",contract:e.action.account,action_name:e.action.name},null,8,["contract","action_name"]),(0,a.createVNode)(m,{onClickPropose:e.emitPropose,onClickBucket:e.emitBucket,label:"Link Module",disabled:!1},null,8,["onClickPropose","onClickBucket"])])])}var Et=o(69917),Zt=o(47592);o(63850);const Qt=(0,a.defineComponent)({name:"link-module",components:{thresholdBadge:Et.Z,proposeBucketBtn:me.Z},props:{slave_permission:{actor:"",permission:""}},data(){return{action:{account:"",name:"linkmodule",data:{module_name:"",slave_permission:{actor:"",permission:""},has_contract:!0}}}},computed:{...(0,c.Se)({getActiveGroup:"group/getActiveGroup",getModuleByName:"group/getModuleByName",getModules:"group/getModules"})},methods:{isValidAccountName:Zt.ZF,isExistingAccountName:Zt.oO,async isExistingAccountNameWrapper(e){return await(0,Zt.oO)({value:e,vm:this})},validateDuplicateModule(e){let t=this.getModuleByName(e);return!t||"Module with this name already linked"},emitPropose(){if(this.$refs.modulename.validate(),this.$refs.actor.validate(),this.$refs.permission.validate(),this.$refs.modulename.hasError||this.$refs.actor.hasError||this.$refs.permission.hasError)return;let e=JSON.parse(JSON.stringify(this.action)),t="Link Module",o=`Link new module "${e.data.module_name}" to the core contract`;const a={actions:[e],description:o,title:t};this.$emit("propose",a)},emitBucket(){if(this.$refs.modulename.validate(),this.$refs.actor.validate(),this.$refs.permission.validate(),this.$refs.modulename.hasError||this.$refs.actor.hasError||this.$refs.permission.hasError)return;let e=JSON.parse(JSON.stringify(this.action));this.$emit("addtobucket",e)}},mounted(){this.action.account=this.getActiveGroup,this.slave_permission.actor&&this.slave_permission.permission&&(this.action.data.slave_permission=this.slave_permission)},watch:{}}),Tt=(0,N.Z)(Qt,[["render",At]]),$t=Tt;x()(Qt,"components",{QInput:V.Z,QToggle:I.Z,QTooltip:ut.Z});const Ut={class:"q-mt-sm row q-col-gutter-md"},St={class:"col-xs-12 col-md-6"},It={key:0,class:"text-grey-8 row"},Pt=(0,a.createElementVNode)("span",null,"Account name available!",-1),Mt=[Pt],Gt={key:1},Dt={class:"col-xs-12 col-md-6"},Lt={class:"col-xs-12 col-md-6"},zt={class:"col-xs-12 col-md-6"},Rt={class:"col-xs-12 col-md-6"},Ft={class:"row"},jt={class:"col-xs-12 col-md-6"},Ot={class:"row"},Jt={class:"col-xs-12"},Ht={class:"row justify-end"},Wt={class:"q-mt-sm row q-col-gutter-md"},Kt={class:"col-xs-12"},Yt={class:"col-xs-12 row q-gutter-md"};function Xt(e,t,o,n,l,r){const i=(0,a.resolveComponent)("q-icon"),c=(0,a.resolveComponent)("q-input"),s=(0,a.resolveComponent)("q-toggle"),d=(0,a.resolveComponent)("q-btn"),m=(0,a.resolveComponent)("q-tab-panel"),u=(0,a.resolveComponent)("q-tab-panels");return(0,a.openBlock)(),(0,a.createBlock)(u,{modelValue:e.new_account_view,"onUpdate:modelValue":t[10]||(t[10]=t=>e.new_account_view=t),style:{"min-height":"200px"},class:"overflow-hidden",animated:"","transition-prev":"fade","transition-next":"fade"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(m,{name:"newaccount",class:"no-padding overflow-hidden",style:{"min-height":"200px"}},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",Ut,[(0,a.createElementVNode)("div",St,[(0,a.createVNode)(c,{ref:"newaccountname",autocomplete:"off",outlined:"","no-error-icon":"",counter:"",maxlength:"12",modelValue:e.new_account_name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_account_name=t),placeholder:"Choose account name",rules:[e=>!!e||"* Required",e.isValidAccountName,e=>12==e.length||"Name must be min 12  chars.",e.isavailableAccountNameWrapper],onInput:t[1]||(t[1]=t=>e.account_name_validated=!1)},{prepend:(0,a.withCtx)((()=>[(0,a.createVNode)(i,{name:"mdi-account"})])),append:(0,a.withCtx)((()=>[e.account_name_validated?((0,a.openBlock)(),(0,a.createBlock)(i,{key:0,name:"check",color:"positive"})):(0,a.createCommentVNode)("",!0)])),hint:(0,a.withCtx)((()=>[e.account_name_validated?((0,a.openBlock)(),(0,a.createElementBlock)("span",It,Mt)):((0,a.openBlock)(),(0,a.createElementBlock)("span",Gt,"12 char account name"))])),_:1},8,["modelValue","rules"])]),(0,a.createElementVNode)("div",Dt,[(0,a.createVNode)(c,{ref:"ramquantity",type:"number",modelValue:e.ram_quantity,"onUpdate:modelValue":t[2]||(t[2]=t=>e.ram_quantity=t),label:"RAM",outlined:"","bottom-slots":"",placeholder:"eos amount","no-error-icon":"",rules:[e=>!!e||"* Required",e=>e>=.001||"Minimum amount is 0.0010"]},{append:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.getAppConfig.system_token.symbol),1)])),_:1},8,["modelValue","rules"])]),(0,a.createElementVNode)("div",Lt,[(0,a.createVNode)(c,{ref:"netquantity",type:"number",modelValue:e.net_quantity,"onUpdate:modelValue":t[3]||(t[3]=t=>e.net_quantity=t),label:"NET",outlined:"","bottom-slots":"",placeholder:"eos amount","no-error-icon":"",rules:[e=>!!e||"* Required"]},{append:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.getAppConfig.system_token.symbol),1)])),_:1},8,["modelValue","rules"])]),(0,a.createElementVNode)("div",zt,[(0,a.createVNode)(c,{ref:"cpuquantity",type:"number",modelValue:e.cpu_quantity,"onUpdate:modelValue":t[4]||(t[4]=t=>e.cpu_quantity=t),label:"CPU",outlined:"","bottom-slots":"",placeholder:"eos amount","no-error-icon":"",rules:[e=>!!e||"* Required"]},{append:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.getAppConfig.system_token.symbol),1)])),_:1},8,["modelValue","rules"])]),(0,a.createElementVNode)("div",Rt,[(0,a.createElementVNode)("div",Ft,[(0,a.createVNode)(s,{modelValue:e.transfer_resources,"onUpdate:modelValue":t[5]||(t[5]=t=>e.transfer_resources=t),color:"positive",label:"transfer resources"},null,8,["modelValue"])])]),(0,a.createElementVNode)("div",jt,[(0,a.createElementVNode)("div",Ot,[(0,a.createVNode)(s,{modelValue:e.include_eosio_code,"onUpdate:modelValue":t[6]||(t[6]=t=>e.include_eosio_code=t),color:"positive",label:"add eosio.code to active permission"},null,8,["modelValue"])])]),(0,a.createElementVNode)("div",Jt,[(0,a.createElementVNode)("div",Ht,[(0,a.createVNode)(d,{label:"create",onClick:e.create,color:"primary",loading:e.is_creating},null,8,["onClick","loading"])])])])])),_:1}),(0,a.createVNode)(m,{name:"account_created",class:"no-padding overflow-hidden",style:{"min-height":"200px"}},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",Wt,[(0,a.createElementVNode)("div",Kt,"Account "+(0,a.toDisplayString)(e.new_account_name)+" created",1),(0,a.createElementVNode)("div",Yt,[(0,a.createVNode)(d,{onClick:t[7]||(t[7]=t=>e.new_account_view="newaccount"),icon:"mdi-arrow-left",label:"create more",color:"secondary"}),(0,a.createVNode)(d,{onClick:t[8]||(t[8]=t=>e.openURL(e.getSelectedBlockExplorer.base+e.getSelectedBlockExplorer.account+e.new_account_name)),icon:"mdi-magnify",label:"explore",color:"primary"}),(0,a.createVNode)(d,{onClick:t[9]||(t[9]=t=>e.$emit("requestLink",{actor:e.new_account_name,permission:"active"})),icon:"mdi-link-box",label:"link as module",color:"primary"})])])])),_:1})])),_:1},8,["modelValue"])}var eo=o(33437),to=o(40019);const oo=(0,a.defineComponent)({name:"newAccount",computed:{...(0,c.Se)({getAccountName:"ual/getAccountName",getActiveGroup:"group/getActiveGroup",getAppConfig:"app/getAppConfig",getSelectedBlockExplorer:"user/getSelectedBlockExplorer"}),getModulesWithFilter(){return this.getModules}},data(){return{new_account_view:"newaccount",is_creating:!1,new_account_name:"",account_name_validated:!1,ram_quantity:"",cpu_quantity:"",net_quantity:"",transfer_resources:!1,include_eosio_code:!1,created_receipt:""}},methods:{openURL:eo.Z,isValidAccountName:Zt.ZF,isAvailableAccountName:Zt.Kx,async isavailableAccountNameWrapper(e){const t=await(0,Zt.Kx)({v:e,vm:this});return to.log(t),!0===t?(this.account_name_validated=!0,!0):(this.account_name_validated=!1,t)},async create(){let e=this.getAccountName,t={account:"eosio",name:"newaccount",data:{creator:e,name:this.new_account_name,active:{accounts:[{permission:{actor:this.getActiveGroup,permission:"owner"},weight:1}],keys:[],threshold:1,waits:[]},owner:{accounts:[{permission:{actor:this.getActiveGroup,permission:"owner"},weight:1},{permission:{actor:this.getAccountName,permission:"active"},weight:1}],keys:[],threshold:1,waits:[]}}};this.include_eosio_code&&t.data.active.accounts.push({permission:{actor:this.new_account_name,permission:"eosio.code"},weight:1});let o={account:"eosio",name:"buyram",data:{payer:e,receiver:this.new_account_name,quant:this.ram_quantity+` ${this.getAppConfig.system_token.symbol}`}},a={account:"eosio",name:"delegatebw",data:{from:e,receiver:this.new_account_name,stake_net_quantity:this.net_quantity+` ${this.getAppConfig.system_token.symbol}`,stake_cpu_quantity:this.cpu_quantity+` ${this.getAppConfig.system_token.symbol}`,transfer:this.transfer_resources}};if(this.$refs.newaccountname.validate(),this.$refs.ramquantity.validate(),this.$refs.netquantity.validate(),this.$refs.cpuquantity.validate(),this.$refs.newaccountname.hasError||this.$refs.ramquantity.hasError||this.$refs.netquantity.hasError||this.$refs.cpuquantity.hasError)return;this.is_creating=!0;let n=[t];n.push(o),(parseFloat(this.net_quantity)||parseFloat(this.cpu_quantity))&&n.push(a);let l=await this.$store.dispatch("ual/transact",{actions:n,disable_signing_overlay:!0});l&&l.trxid&&(to.log(l),this.new_account_view="account_created"),this.is_creating=!1}},watch:{ram_quantity:function(e,t){""!==this.ram_quantity&&(this.ram_quantity=Number(this.ram_quantity).toFixed(this.getAppConfig.system_token.precision))},net_quantity:function(e,t){""!==this.net_quantity&&(this.net_quantity=Number(this.net_quantity).toFixed(this.getAppConfig.system_token.precision))},cpu_quantity:function(e,t){""!==this.cpu_quantity&&(this.cpu_quantity=Number(this.cpu_quantity).toFixed(this.getAppConfig.system_token.precision))}}}),ao=(0,N.Z)(oo,[["render",Xt]]),no=ao;x()(oo,"components",{QTabPanels:Xe.Z,QTabPanel:et.Z,QInput:V.Z,QIcon:b.Z,QToggle:I.Z,QBtn:pe.Z});var lo=o(3229);const ro=(0,a.defineComponent)({name:"manageModules",components:{actionProposer:ae.Z,linkModule:$t,noItems:lo.Z,codeDeployer:Je,newAccount:no},data(){return{manage_module:!1,manage_module_view:"link",slave_permission:{actor:"",permission:""}}},computed:{...(0,c.Se)({getAccountName:"ual/getAccountName",getModules:"group/getModules",getActiveGroup:"group/getActiveGroup"}),getModulesWithFilter(){return this.getModules}},methods:{handleLinkRequest(e){this.slave_permission=e,this.manage_module_view="link"}}});var io=o(10151),co=o(39570),so=o(13747),mo=o(62025),uo=o(60429),po=o(69721),ho=o(65869),go=o(25589),Co=o(57547),_o=o(58408);const fo=(0,N.Z)(ro,[["render",wt]]),vo=fo;x()(ro,"components",{QCard:io.Z,QToolbar:co.Z,QToolbarTitle:so.Z,QSpace:mo.Z,QBtn:pe.Z,QTooltip:ut.Z,QList:T.Z,QExpansionItem:uo.Z,QItemSection:U.Z,QBadge:po.Z,QItemLabel:S.Z,QSeparator:ho.Z,QCardSection:go.Z,QTabs:Co.Z,QTab:_o.Z,QTabPanels:Xe.Z,QTabPanel:et.Z});const wo=(0,a.defineComponent)({name:"groupSubaccounts",components:{pageHeader:s.Z,configEditor:ot,configUpdater:ht,manageModules:vo},data(){return{view_panel:"config_view",splitterModel:40,selected:"Modules"}},computed:{...(0,c.Se)({getAccountName:"ual/getAccountName",getGuardians:"group/getGuardians",getActiveGroup:"group/getActiveGroup",getCoreConfigDeltas:"group/getCoreConfigDeltas",getNewCoreConfig:"group/getNewCoreConfig"})},methods:{getGroupTree(){return testtree[0].label=this.getActiveGroup.toUpperCase(),testtree}}});var No=o(24379);const Vo=(0,N.Z)(wo,[["render",i]]),bo=Vo;x()(wo,"components",{QPage:No.Z,QCard:io.Z,QBtn:pe.Z,QTabPanels:Xe.Z,QTabPanel:et.Z})}}]);